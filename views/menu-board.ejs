<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Menu Board</title>
  <link rel="stylesheet" href="/public/css/globals.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<!--Styles Based on Page-->
<!-- Featured Page Styles -->
 <% if (page === "featured") { %>
  <style>
    body { background: #FFEDCE; }
  </style>
  <% } %>
<!-- Entrees Page Styles -->
  <% if (page === "entrees") { %> 
  <style>
    .pick-a-meal-container{
      margin: 20px;
      background-color: #ffffff;
      padding: 20px;
    }

    .meal-row {
      display: flex;
      justify-content: space-between; /* separate left and right */
      align-items: flex-start;        /* top-align everything to the img */
      width: 100%;
      margin-bottom: 20px;
    }

    .meal-left {
      display: flex;
      gap: 15px; /* space between image and text stack */
      align-items: flex-start;
    }

    .meal-text {
      display: flex;
      flex-direction: column; /* stack top-text + bottom-text */
      gap: 5px;
    }

    .top-text {
      display: flex;
      gap: 10px; /* space between bowl and calories */
      align-items: baseline;
    }

    .meal-right {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 5px;
    }

    .meal-image {
      width: 200px;
      height: auto;
      border-radius: 8px;
    }

    .meal-name {
      color: #D61927;
      font-size: 40px;
    }

    .calories {
      color: #555;
      font-size: 35px;
    }

    .meal-desc {
      font-size: 30px;
      color: #333;
    }

    .meal-starts-at {
      color: #777;
      font-size: 30px;
    }

    .meal-price {
      font-size: 30px;
      font-weight: bold;
      color: #555;
    }

  </style>
  <% } %>
  <!-- Appetizers Page Style -->
  <% if (page === "appetizers") { %>
  <style>
    .menu-page-container { background: #fff5e6; }
  </style>
  <% } %>
  <!-- A La Carte Page Style -->
  <% if (page === "a_la_carte") { %> 
  <style>
    .a-la-carte-container{
      margin: 20px;
      background-color: #ffffff;
      padding: 20px;
    }
    .entree-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 2 columns */
      gap: 15px; /* space between grid items */
    }
    .meal-image {
      width: 150px;   /* adjust as needed */
      height: auto;   /* keeps aspect ratio */
      border-radius: 8px;
      transform: scale(1.1);
      object-fit: cover;
      margin-right: 10px;
    }
    .meal-option {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px;
      border-radius: 8px;
    }
    .meal-text {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .meal-name {
      color: black;
      font-size: 30px;
    }
    .meal-calories {
      color: #555;
      font-size: 25px;
    }
    .meal-price {
      font-size: 25px;
      font-weight: bold;
      color: #555;
    }

  </style>
  <% } %>
  <!-- Sides Page Style -->
  <% if (page === "sides") { %> 
  <style>
  </style>
  <% } %>

<!-- Common Style -->
<style>
  html, body{
    font-family: 'Montserrat', sans-serif;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
  }
  body{
    background-color: #FFEDCE;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
  }
  .nav-buttons {
    display: flex;
    gap: 10px; /* space between buttons */
    margin: 20px 0;
    font-weight: bold;
  }

  .nav-buttons a {
    text-decoration: none;
    padding: 8px 12px;
    border-radius: 6px;
    background: #fff;           /* white background for inactive */
    color: black;             /* red text for inactive */
    text-transform: uppercase;
  }

  .nav-buttons a.active {
    background: #d61927;        /* red background for active page */
    color: #fff;                /* white text for active page */
  }

  .title{
    color: #D61927;
    font-size: 50px;
  }
</style>
</head>

<body>
  <div class="fullscreen-button-container">
      <button id="fullscreen-btn">Go Fullscreen</button>
    </div>
  <div class="menu-page-container" style="width: 100%; height:100%;">
    <h1>Menu Board</h1>

    <!-- Navigation -->
    <nav class="nav-buttons">
      <a href="/menu-board?page=featured" class="<%= page==='featured'?'active':'' %>">FEATURED</a>
      <a href="/menu-board?page=entrees" class="<%= page==='entrees'?'active':'' %>">PICK A MEAL</a>
      <a href="/menu-board?page=appetizers" class="<%= page==='appetizers'?'active':'' %>">APPETIZERS</a>
      <a href="/menu-board?page=a_la_carte" class="<%= page==='a_la_carte'?'active':'' %>">ENTREE CHOICES</a>
      <a href="/menu-board?page=sides" class="<%= page==='sides'?'active':'' %>">SIDE CHOICES</a>
    </nav>

    <!-- Page Content -->
    <!-- Featured content -->
    <% if (page === "featured") { %>
      <h1 class="title">FEATURED</h1>
    <% } %>

    <!-- Entrees content -->
    <div class="pick-a-meal-container">
      <% if (page === "entrees") { %>
        <h1 class="title">PICK A MEAL</h1>

        <% const items = menu[page] || []; %>

        <% 
          const bowl = items.find(i => i.name === "Bowl");
          const plate = items.find(i => i.name === "Plate");
          const biggerPlate = items.find(i => i.name === "Bigger Plate");
        %>

        <!-- BOWL -->
        <% if (bowl) { %>
          <div>
          <div class="meal-option">
            <div class="meal-row">
              <!-- LEFT COLUMN -->
              <div class="meal-left">
                <!-- Image separately -->
                <img src="/images/bowl.jpg" alt="Bowl" class="meal-image"/>
                
                <!-- Text stack next to image -->
                <div class="meal-text">
                  <div class="top-text">
                    <span class="meal-name"><strong>Bowl</strong></span>
                    <span class="calories">280-1130 cal</span>
                  </div>
                  <div class="bottom-text">
                    <span class="meal-desc">1 entree & 1 side</span>
                  </div>
                </div>
              </div>

              <!-- RIGHT COLUMN -->
              <div class="meal-right">
                <span class="meal-starts-at">starts at</span>
                <span class="meal-price">$<%= bowl.price.toFixed(2) %></span>
              </div>
            </div>
          </div>
        <% } %>

        <!-- PLATE -->
        <% if (plate) { %>
          <div class="meal-option">
            <div class="meal-row">
              <!-- LEFT COLUMN -->
              <div class="meal-left">
                <!-- Image separately -->
                <img src="/images/plate.jpg" alt="Plate" class="meal-image"/>
                
                <!-- Text stack next to image -->
                <div class="meal-text">
                  <div class="top-text">
                    <span class="meal-name"><strong>Plate</strong></span>
                    <span class="calories">430-1640 cal</span>
                  </div>
                  <div class="bottom-text">
                    <span class="meal-desc">2 entrees & 1 side</span>
                  </div>
                </div>
              </div>

              <!-- RIGHT COLUMN -->
              <div class="meal-right">
                <span class="meal-starts-at">starts at</span>
                <span class="meal-price">$<%= bowl.price.toFixed(2) %></span>
              </div>
            </div>
          </div>
        <% } %>

        <!-- BIGGER PLATE -->
        <% if (biggerPlate) { %>
          <div class="meal-option">
            <div class="meal-row">
              <!-- LEFT COLUMN -->
              <div class="meal-left">
                <!-- Image separately -->
                <img src="/images/bigger-plate.jpg" alt="Bigger Plate" class="meal-image"/>
                
                <!-- Text stack next to image -->
                <div class="meal-text">
                  <div class="top-text">
                    <span class="meal-name"><strong>Bigger Plate</strong></span>
                    <span class="calories">540-1990 cal</span>
                  </div>
                  <div class="bottom-text">
                    <span class="meal-desc">3 entrees & 1 side</span>
                  </div>
                </div>
              </div>

              <!-- RIGHT COLUMN -->
              <div class="meal-right">
                <span class="meal-starts-at">starts at</span>
                <span class="meal-price">$<%= bowl.price.toFixed(2) %></span>
              </div>
            </div>
          </div>
        <% } %>

        <h1 class="title">PANDA BUNDLES</h1>
        <p>Coming Soon!</p>
      <% } %>
    </div>

    <!-- Appetizers content -->
    <% if (page === "appetizers") { %>
      <h1 class="title">APPETIZERS</h1>
      <% const items = menu[page] || []; %>

        <% if (items.length > 0) { %>
          <ul>
            <% items.forEach(item => { %>
              <p><%= item.name %> — $<%= item.price.toFixed(2) %></p>
            <% }) %>
          </ul>
        <% } else { %>
          <p>No items in this category.</p>
        <% } %>
    <% } %>

<!-- A La Carte content -->
<div class="a-la-carte-container">
  <% if (page === "a_la_carte") { %>
    <h1 class="title">ENTREE CHOICES</h1>
    <% 
      const displayOrder = [
        "The Original Orange Chicken",
        "Honey Walnut Shrimp",
        "Black Pepper Sirloin Steak",
        "Broccoli Beef",
        "Kung Pao Chicken",
        "Honey Sesame Chicken Breast",
        "Beijing Beef",
        "String Bean Chicken Breast",
        "Mushroom Chicken",
        "Grilled Teriyaki Chicken",
        "Black Pepper Chicken"
      ];
      const calories = {
        "Orange Chicken": "510 cal",
        "Honey Sesame Chicken Breast": "340 cal",
        "Beijing Beef": "480 cal",
        "Grilled Teriyaki Chicken": "275 cal",
        "Black Pepper Sirloin Steak": "180 cal",
        "Broccoli Beef": "150 cal",
        "Kung Pao Chicken": "320 cal",
        "Mushroom Chicken": "220 cal",
        "String Bean Chicken Breast": "210 cal",
        "Honey Walnut Shrimp": "430 cal",
        "Black Pepper Chicken": "280 cal",
        "The Original Orange Chicken": "510 cal",
      };
      const entreesFromDB = menu['a_la_carte'] || [];
      const filteredEntrees = entreesFromDB.filter(item => displayOrder.includes(item.name));
      const entrees = displayOrder.map(name => filteredEntrees.find(item => item.name === name)).filter(item => item);
    %>
    <div class ="entree-grid">
      <% entrees.forEach(item => { %>
        <div class="meal-option">
          <img src="/images/<%= item.name.toLowerCase().replace(/ /g, '-')%>.jpg" alt="<%= item.name %>" class="meal-image"/>
          <div class="meal-text">
            <div class="meal-name"><strong><%= item.name %></strong></div>
            <div class="meal-calories"><%= calories[item.name] %></div>
            <div class="meal-price">$<%= item.price.toFixed(2) %></div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>





    <!-- Sides content -->
    <div class="sides-container">
      <% if (page === "sides") { %>
        <h1 class="title">SIDE CHOICES</h1>
        
        <% const items = menu[page] || []; %>

        <!--const chow-mein = items.find(i => i.name === "Chow Mein");
          const fried-rice = items.find(i => i.name === "Fried Rice");
          const super-green = items.find(i => i.name === "Super Greens");
          const white-steamed-rice = items.find(i => i.name === "White Steamed Rice");-->

          <% if (items.length > 0) { %>
            <ul>
              <% items.forEach(item => { %>
                <p><%= item.name %> — $<%= item.price.toFixed(2) %></p>
              <% }) %>
            </ul>
          <% } else { %>
            <p>No items in this category.</p>
          <% } %>
      <% } %>
     </div>

  </div>
</body>

<script>
  const header = document.querySelector('h1');
  const nav = document.querySelector('.nav-buttons');
  const fsBtn = document.getElementById('fullscreen-btn');
  const docEl = document.documentElement;
  fsBtn.addEventListener('click', () => {

    // Request fullscreen
    if (docEl.requestFullscreen) docEl.requestFullscreen();
    else if (docEl.webkitRequestFullscreen) docEl.webkitRequestFullscreen();
    else if (docEl.msRequestFullscreen) docEl.msRequestFullscreen();

    // Hide everything except menu items
    header.style.display = 'none'; // hide fullscreen button
    nav.style.display = 'none';    // hide navigation
    fsBtn.style.display = 'none';  // hide header
  });

    document.addEventListener('fullscreenchange', () => {
    const inFs = !!document.fullscreenElement;

    // Show/hide elements based on fullscreen state
    header.style.display = inFs ? 'none' : 'block';
    nav.style.display = inFs ? 'none' : 'flex';
    fsBtn.style.display = inFs ? 'none' : 'inline-block';
  });
</script>


</html>

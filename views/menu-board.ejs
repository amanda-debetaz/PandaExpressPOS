<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Menu Board</title>
  <link rel="stylesheet" href="/public/css/globals.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<!--Styles Based on Page-->
<!-- Featured Page Styles -->
 <% if (page === "featured") { %>
  <style>
    .featured-instruction {
      text-align: center;
      color: #fff;
      font-size: clamp(16px, 1.4vw, 28px);
      margin: clamp(10px, 1vw, 20px) 0;
      padding: clamp(8px, 0.8vw, 16px);
      background: rgba(50, 50, 50, 0.9);
      border-radius: clamp(6px, 0.6vw, 12px);
      backdrop-filter: blur(10px);
    }

    .featured-images {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: clamp(15px, 1.5vw, 40px);
    }

    .featured-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: clamp(8px, 0.8vw, 15px);
    }

    .featured-img {
      cursor: pointer;
      border-radius: clamp(4px, 0.4vw, 12px);
      transition: transform 0.2s;
      width: 100%;
      height: clamp(300px, 35vh, 600px);
      object-fit: cover;
    }

    .image-selector {
      display: flex;
      align-items: center;
      gap: clamp(5px, 0.5vw, 10px);
      color: #fff;
      font-size: clamp(12px, 1vw, 20px);
      cursor: pointer;
      user-select: none;
    }

    .image-selector input[type="checkbox"] {
      width: clamp(16px, 1.5vw, 24px);
      height: clamp(16px, 1.5vw, 24px);
      cursor: pointer;
    }

    .image-selector span {
      white-space: nowrap;
    }

    .featured-img:hover {
      transform: scale(1.03);
    }

    /* Fullscreen styling for individual images */
    .featured-img:fullscreen {
      width: 60vw !important;
      height: 60vh !important;
      object-fit: contain !important;
      background: black;
      position: fixed !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) !important;
    }

    .featured-img:-webkit-full-screen {
      width: 60vw !important;
      height: 60vh !important;
      object-fit: contain !important;
      background: black;
      position: fixed !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) !important;
    }

    .featured-img:-moz-full-screen {
      width: 60vw !important;
      height: 60vh !important;
      object-fit: contain !important;
      background: black;
      position: fixed !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) !important;
    }

    .featured-img:-ms-fullscreen {
      width: 60vw !important;
      height: 60vh !important;
      object-fit: contain !important;
      background: black;
      position: fixed !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) !important;
    }


  </style>
  <% } %>
<!-- Entrees Page Styles -->
  <% if (page === "entrees") { %> 
  <style>
    .pick-a-meal-container{
      margin: clamp(10px, 1vw, 30px);
      background-color: #ffffff;
      padding-left: clamp(10px, 1vw, 30px);
      padding-right: clamp(10px, 1vw, 30px);
      height: auto;
      width: auto;
    }

    .meal-row {
      display: flex;
      justify-content: space-between; /* separate left and right */
      align-items: flex-start;        /* top-align everything to the img */
      width: 100%;
      margin-bottom: clamp(8px, 0.8vw, 20px);
    }

    .meal-left {
      display: flex;
      gap: clamp(8px, 0.8vw, 20px); /* space between image and text stack */
      align-items: flex-start;
    }

    .meal-text {
      display: flex;
      flex-direction: column; /* stack top-text + bottom-text */
      gap: clamp(3px, 0.3vw, 8px);
    }

    .top-text {
      display: flex;
      gap: clamp(5px, 0.5vw, 15px); /* space between bowl and calories */
      align-items: baseline;
    }

    .meal-right {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: clamp(3px, 0.3vw, 8px);
    }

    .meal-image {
      width: clamp(150px, 10vw, 250px);
      height: auto;
      border-radius: clamp(6px, 0.5vw, 15px);
      transform: scale(1.0);
    }

    .meal-name {
      color: #D61927;
      font-size: clamp(30px, min(2.5vw, 3.5vh), 60px);
    }

    .calories {
      color: #555;
      font-size: clamp(30px, min(2.5vw, 3.5vh), 60px);
    }

    .meal-desc {
      font-size: clamp(26px, min(2.2vw, 3vh), 52px);
      color: #333;
    }

    .meal-starts-at {
      color: #777;
      font-size: clamp(26px, min(2.2vw, 3vh), 52px);
    }

    .meal-price {
      font-size: clamp(26px, min(2.2vw, 3vh), 52px);
      font-weight: bold;
      color: #555;
    }

  </style>
  <% } %>
  <!-- Appetizers and Drinks Page Style -->
  <% if (page === "appetizers") { %>
  <style>
    .appetizers-drinks-container{
      margin: clamp(10px, 1vw, 30px);
      background-color: #ffffff;
      padding: clamp(10px, 1vw, 30px);
    }
    .meal-name {
      color: #000000;
      font-size: clamp(26px, min(2.2vw, 3vh), 52px);
      margin-top: clamp(8px, 0.8vw, 20px);
      word-wrap: break-word;
      overflow-wrap: break-word;
      width: 100%;
    }
    .meal-calories {
      color: #555;
      font-size: clamp(22px, min(1.8vw, 2.5vh), 44px);
    }
    .meal-price {
      font-size: clamp(22px, min(1.8vw, 2.5vh), 44px);
      font-weight: bold;
      color: #555;
    }
    .meal-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 3 columns */
      gap: clamp(15px, 1.5vw, 40px); /* space between items */
    }
    .meal-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      width: 100%;
    }
    .meal-image {
      width: clamp(150px, 10vw, 250px);
      height: auto;
      border-radius: clamp(6px, 0.5vw, 15px);
      transform: scale(1.6);
    }

  </style>
  <% } %>
  <!-- A La Carte Page Style -->
  <% if (page === "a_la_carte") { %>
  <style>
    .a-la-carte-container{
      margin: clamp(10px, 1vw, 30px);
      background-color: #ffffff;
      padding: clamp(10px, 1vw, 30px);
    }
    .entree-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 2 columns */
      gap: clamp(3px, 0.3vw, 8px); /* space between grid items */
    }
    .meal-image {
      width: clamp(180px, 12vw, 300px);
      height: auto;   /* keeps aspect ratio */
      border-radius: clamp(6px, 0.5vw, 15px);
      object-fit: cover;
      margin-right: clamp(8px, 0.8vw, 20px);
      flex-shrink: 0;
    }
    .meal-option {
      display: flex;
      align-items: center;
      gap: clamp(12px, 1.2vw, 30px);
      padding: clamp(5px, 0.5vw, 12px);
      border-radius: clamp(6px, 0.5vw, 15px);
    }
    .meal-text {
      display: flex;
      flex-direction: column;
      gap: clamp(5px, 0.5vw, 12px);
      flex: 1;
      min-width: 0;
    }
    .meal-name {
      color: black;
      font-size: clamp(26px, min(2.2vw, 3vh), 52px);
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    .meal-calories {
      color: #555;
      font-size: clamp(22px, min(1.8vw, 2.5vh), 44px);
    }
    .meal-price {
      font-size: clamp(22px, min(1.8vw, 2.5vh), 44px);
      font-weight: bold;
      color: #555;
    }

  </style>
  <% } %>
  <!-- Sides Page Style -->
  <% if (page === "sides") { %>
  <style>
    .sides-container{
      margin: clamp(10px, 1vw, 30px);
      background-color: #ffffff;
      padding: clamp(8px, 0.8vw, 20px);
    }
    .meal-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 3 columns */
      gap: clamp(8px, 0.8vw, 20px); /* space between items */
    }
    .meal-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      width: 100%;
    }
    .meal-image {
      width: clamp(180px, 12vw, 300px);
      height: auto;
      border-radius: clamp(6px, 0.5vw, 15px);
      object-fit: cover;
      margin-bottom: clamp(3px, 0.3vw, 8px);
    }
    .meal-name {
      color: black;
      font-size: clamp(26px, min(2.2vw, 3vh), 52px);
      word-wrap: break-word;
      overflow-wrap: break-word;
      width: 100%;
    }
    .meal-calories {
      color: #555;
      font-size: clamp(22px, min(1.8vw, 2.5vh), 44px);
    }
    .meal-price {
      font-size: clamp(22px, min(1.8vw, 2.5vh), 44px);
      font-weight: bold;
      color: #555;
    }
  </style>
  <% } %>

<!-- Common Style -->
<style>
  html, body{
    font-family: 'Montserrat', sans-serif;
    margin: 0;
    padding: 0;
    height: 100%;
  }
  body{
    background-color: #000000;
    display: flex;
    flex-direction: column;
  }
  .nav-buttons {
    display: flex;
    gap: clamp(5px, 0.5vw, 15px); /* space between buttons */
    margin: clamp(10px, 1vw, 30px) 0;
    font-weight: bold;
    padding-left: clamp(10px, 1vw, 30px);
  }

  .pick-a-meal-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }

  .nav-buttons a {
    text-decoration: none;
    padding: clamp(8px, 0.8vw, 40px) clamp(12px, 1.2vw, 60px);
    border-radius: clamp(5px, 0.5vw, 20px);
    background: #fff;           /* white background for inactive */
    color: black;             /* red text for inactive */
    text-transform: uppercase;
    font-size: clamp(14px, 1.2vw, 48px);
  }

  .nav-buttons a.active {
    background: #b91419;        /* darker red background for active page - better WCAG contrast */
    color: #fff;                /* white text for active page */
  }

  .nav-buttons a:hover:not(.active) {
    background: #e5e5e5;
  }

  /* Focus indicators for accessibility */
  .nav-buttons a:focus {
    outline: 3px solid #4A90E2;
    outline-offset: 2px;
  }

  .featured-img:focus {
    outline: 4px solid #4A90E2;
    outline-offset: 4px;
  }

  button:focus {
    outline: 3px solid #4A90E2;
    outline-offset: 2px;
  }

  #fullscreen-btn, #back-btn, #autoscroll-btn {
  text-decoration: none;
  padding: clamp(8px, 0.8vw, 40px) clamp(12px, 1.2vw, 60px);
  border-radius: clamp(5px, 0.5vw, 20px);
  background: #fff;   /* same as inactive nav buttons */
  color: black;
  text-transform: uppercase;
  font-weight: 600;
  border: none;
  cursor: pointer;
  font-size: clamp(14px, 1.2vw, 48px);
  }

  #fullscreen-btn:hover, #back-btn:hover, #autoscroll-btn:hover {
    background: #e5e5e5;
  }

  body.fullscreen #fullscreen-btn {
    background: #b91419;
    color: #fff;
  }

  #autoscroll-btn.active {
    background: #b91419;
    color: #fff;
  }

  /* Autoscroll fullscreen container */
  #autoscroll-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000;
    z-index: 9999;
    justify-content: center;
    align-items: center;
  }

  #autoscroll-container.active {
    display: flex;
  }

  #autoscroll-container img {
    height: 100vh;
    width: auto;
    max-width: 100vw;
    object-fit: contain;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
  }

  #autoscroll-container img.visible {
    opacity: 1;
  }

  /* Exit button for autoscroll */
  #exit-autoscroll {
    position: fixed;
    top: clamp(20px, 2vh, 40px);
    right: clamp(20px, 2vw, 40px);
    padding: clamp(15px, 1.5vh, 35px) clamp(30px, 3vw, 70px);
    background: rgba(185, 20, 25, 0.9);
    color: white;
    border: none;
    border-radius: clamp(8px, 0.8vw, 16px);
    cursor: pointer;
    font-size: clamp(18px, 1.8vw, 42px);
    font-weight: 600;
    text-transform: uppercase;
    z-index: 10000;
    opacity: 0;
    transition: opacity 0.3s ease, background 0.2s;
    pointer-events: none;
  }

  #exit-autoscroll.visible {
    opacity: 1;
    pointer-events: auto;
  }

  #exit-autoscroll:hover {
    background: rgba(185, 20, 25, 1);
  }

  /* Hide cursor when inactive in autoscroll */
  #autoscroll-container.hide-cursor {
    cursor: none;
  }
  .title{
    color: #D61927;
    font-size: clamp(40px, min(3.5vw, 5vh), 150px);
    margin: 0;
    font-weight: bold;
  }

  /* Fullscreen mode adjustments - ensure content fits viewport */
  :fullscreen body,
  :-webkit-full-screen body,
  :-moz-full-screen body,
  :-ms-fullscreen body {
    max-height: 100vh;
    overflow-y: auto;
  }

  :fullscreen .menu-page-container,
  :-webkit-full-screen .menu-page-container,
  :-moz-full-screen .menu-page-container,
  :-ms-fullscreen .menu-page-container {
    max-height: 95vh;
    overflow-y: auto;
  }

  :fullscreen .pick-a-meal-container,
  :-webkit-full-screen .pick-a-meal-container,
  :-moz-full-screen .pick-a-meal-container,
  :-ms-fullscreen .pick-a-meal-container {
    max-height: 85vh;
  }

  :fullscreen .appetizers-drinks-container,
  :-webkit-full-screen .appetizers-drinks-container,
  :-moz-full-screen .appetizers-drinks-container,
  :-ms-fullscreen .appetizers-drinks-container {
    max-height: 85vh;
    overflow-y: auto;
  }

  :fullscreen .a-la-carte-container,
  :-webkit-full-screen .a-la-carte-container,
  :-moz-full-screen .a-la-carte-container,
  :-ms-fullscreen .a-la-carte-container {
    max-height: 85vh;
    overflow-y: auto;
  }

  :fullscreen .sides-container,
  :-webkit-full-screen .sides-container,
  :-moz-full-screen .sides-container,
  :-ms-fullscreen .sides-container {
    max-height: 85vh;
    overflow-y: auto;
  }
</style>
</head>

<body>

  <!-- Autoscroll fullscreen container -->
  <div id="autoscroll-container">
    <button id="exit-autoscroll">Exit Autoscroll</button>
    <img id="autoscroll-image" src="" alt="Featured Item">
  </div>

  <!--<button id="fullscreen-btn">Go Fullscreen</button>-->
  <div class="top-container" id="top-container">
    <div style="text-align: right; padding-inline: clamp(10px, 1vw, 30px); padding-top: clamp(5px, 0.5vw, 15px);">
      <button id="fullscreen-btn">
        Go Fullscreen
      </button>
      <% if (page === "featured") { %>
      <button id="autoscroll-btn" aria-pressed="false">
        Start Autoscroll
      </button>
      <% } %>
      <button id="back-btn">
        Back to Navigation
      </button>
    </div>

  <h1 style="font-size: clamp(24px, min(2vw, 3vh), 48px); letter-spacing: 0.25em; padding-left: clamp(10px, 1vw, 30px); margin-bottom: 0;" class="uppercase text-red-500 font-bold">
    PANDA EXPRESS
  </h1>
  <h2 style="font-size: clamp(16px, min(1.3vw, 2vh), 32px); letter-spacing: 0.3em; padding-left: clamp(10px, 1vw, 30px); margin-top: clamp(4px, 0.4vw, 10px);" class="uppercase text-neutral-400">
          MENU BOARD
  </h2>

  <nav class="nav-buttons">
    <a href="/menu-board?page=featured" class="<%= page==='featured'?'active':'' %>">FEATURED</a>
    <a href="/menu-board?page=entrees" class="<%= page==='entrees'?'active':'' %>">PICK A MEAL</a>
    <a href="/menu-board?page=appetizers" class="<%= page==='appetizers'?'active':'' %>">APPETIZERS AND DRINKS</a>
    <a href="/menu-board?page=a_la_carte" class="<%= page==='a_la_carte'?'active':'' %>">ENTREE CHOICES</a>
    <a href="/menu-board?page=sides" class="<%= page==='sides'?'active':'' %>">SIDE CHOICES</a>
  </nav>
</div>


  <div class="menu-page-container" style="width: 100%; height:100%;">
    <!-- Page Content -->
    <!-- Featured content -->

    <% if (page === "featured") { %>
      <div style="padding-left: clamp(10px, 1vw, 30px);">
        <h1 class="title">FEATURED ITEMS</h1>
      </div>
      <p class="featured-instruction">Click any image to view it in fullscreen</p>
      <div class="featured-images">
        <div class="featured-item">
          <img src="/images/chili-crisp-shrimp.jpg" class="featured-img" alt="Chili Crisp Shrimp" tabindex="0" role="button" aria-label="View Chili Crisp Shrimp in fullscreen" data-img-src="/images/chili-crisp-shrimp.jpg" />
          <label class="image-selector">
            <input type="checkbox" class="img-checkbox" checked data-img-src="/images/chili-crisp-shrimp.jpg" aria-label="Include Chili Crisp Shrimp in autoscroll" />
            <span>Include in autoscroll</span>
          </label>
        </div>
        <div class="featured-item">
          <img src="/images/hot-orange-chicken.jpg" class="featured-img" alt="Hot Orange Chicken" tabindex="0" role="button" aria-label="View Hot Orange Chicken in fullscreen" data-img-src="/images/hot-orange-chicken.jpg" />
          <label class="image-selector">
            <input type="checkbox" class="img-checkbox" checked data-img-src="/images/hot-orange-chicken.jpg" aria-label="Include Hot Orange Chicken in autoscroll" />
            <span>Include in autoscroll</span>
          </label>
        </div>
        <div class="featured-item">
          <img src="/images/wok-seared-steak-and-shrimp.jpg" class="featured-img" alt="Wok Seared Steak and Shrimp" tabindex="0" role="button" aria-label="View Wok Seared Steak and Shrimp in fullscreen" data-img-src="/images/wok-seared-steak-and-shrimp.jpg" />
          <label class="image-selector">
            <input type="checkbox" class="img-checkbox" checked data-img-src="/images/wok-seared-steak-and-shrimp.jpg" aria-label="Include Wok Seared Steak and Shrimp in autoscroll" />
            <span>Include in autoscroll</span>
          </label>
        </div>
        <div class="featured-item">
          <img src="/images/orange-chicken-featured.jpg" class="featured-img" alt="The Original Orange Chicken" tabindex="0" role="button" aria-label="View The Original Orange Chicken in fullscreen" data-img-src="/images/orange-chicken-featured.jpg" />
          <label class="image-selector">
            <input type="checkbox" class="img-checkbox" checked data-img-src="/images/orange-chicken-featured.jpg" aria-label="Include The Original Orange Chicken in autoscroll" />
            <span>Include in autoscroll</span>
          </label>
        </div>
      </div>

    <% } %>


    <!-- Entrees content -->
    <div class="pick-a-meal-container">
      <% if (page === "entrees") { %>
        <h1 class="title">PICK A MEAL</h1>

        <% 
          const items = menu[page] || [];

          const bowl = items.find(i => i.name === "Bowl");
          const plate = items.find(i => i.name === "Plate");
          const biggerPlate = items.find(i => i.name === "Bigger Plate");
          const pandaBundles = [
            {
              name: "Bowl + Drink",
              calories: "280-1690 cal",
              price: 10.70,
              image: "/images/bowl.jpg"
            },
            {
              name: "Plate + Drink",
              calories: "560-2200 cal",
              price: 12.20,
              image: "/images/plate.jpg"
            },
            {
              name: "Bigger Plate + Drink",
              calories: "710-2710 cal",
              price: 13.90,
              image: "/images/bigger-plate.jpg"
            }
          ];
        %>

        <!-- BOWL -->
        <% if (bowl) { %>
          <div>
          <div class="meal-option">
            <div class="meal-row">
              <!-- LEFT COLUMN -->
              <div class="meal-left">
                <!-- Image separately -->
                <img src="/images/bowl.jpg" alt="Bowl" class="meal-image"/>
                
                <!-- Text stack next to image -->
                <div class="meal-text">
                  <div class="top-text">
                    <span class="meal-name"><strong>Bowl</strong></span>
                    <span class="calories">280-1130 cal</span>
                  </div>
                  <div class="bottom-text">
                    <span class="meal-desc">1 entree & 1 side</span>
                  </div>
                </div>
              </div>

              <!-- RIGHT COLUMN -->
              <div class="meal-right">
                <span class="meal-starts-at">starts at</span>
                <span class="meal-price">$<%= bowl.price.toFixed(2) %></span>
              </div>
            </div>
          </div>
        <% } %>

        <!-- PLATE -->
        <% if (plate) { %>
          <div class="meal-option">
            <div class="meal-row">
              <!-- LEFT COLUMN -->
              <div class="meal-left">
                <!-- Image separately -->
                <img src="/images/plate.jpg" alt="Plate" class="meal-image"/>
                
                <!-- Text stack next to image -->
                <div class="meal-text">
                  <div class="top-text">
                    <span class="meal-name"><strong>Plate</strong></span>
                    <span class="calories">430-1640 cal</span>
                  </div>
                  <div class="bottom-text">
                    <span class="meal-desc">2 entrees & 1 side</span>
                  </div>
                </div>
              </div>

              <!-- RIGHT COLUMN -->
              <div class="meal-right">
                <span class="meal-starts-at">starts at</span>
                <span class="meal-price">$<%= plate.price.toFixed(2) %></span>
              </div>
            </div>
          </div>
        <% } %>

        <!-- BIGGER PLATE -->
        <% if (biggerPlate) { %>
          <div class="meal-option">
            <div class="meal-row">
              <!-- LEFT COLUMN -->
              <div class="meal-left">
                <!-- Image separately -->
                <img src="/images/bigger-plate.jpg" alt="Bigger Plate" class="meal-image"/>
                
                <!-- Text stack next to image -->
                <div class="meal-text">
                  <div class="top-text">
                    <span class="meal-name"><strong>Bigger Plate</strong></span>
                    <span class="calories">540-1990 cal</span>
                  </div>
                  <div class="bottom-text">
                    <span class="meal-desc">3 entrees & 1 side</span>
                  </div>
                </div>
              </div>

              <!-- RIGHT COLUMN -->
              <div class="meal-right">
                <span class="meal-starts-at">starts at</span>
                <span class="meal-price">$<%= biggerPlate.price.toFixed(2) %></span>
              </div>
            </div>
          </div>
        <% } %>

        <!-- Panda Bundles -->
        <h2 class="title">PANDA BUNDLES</h2>
        <% pandaBundles.forEach(bundle => { %>
          <div class="meal-option">
            <div class="meal-row">
              <div class="meal-left">
                <img src="<%= bundle.image %>" alt="<%= bundle.name %>" class="meal-image"/>
                <div class="meal-text">
                  <div class="top-text">
                    <span class="meal-name"><strong><%= bundle.name %></strong></span>
                    <span class="calories"><%= bundle.calories %></span>
                  </div>
                  <div class="bottom-text">
                    <span class="meal-desc"><%= bundle.description %></span>
                  </div>
                </div>
              </div>
              <div class="meal-right">
                <span class="meal-starts-at">starts at</span>
                <span class="meal-price">$<%= bundle.price.toFixed(2) %></span>
              </div>
            </div>
          </div>
        <% }) %>
      <% } %>

    </div>

    <!-- Appetizers and Drinks content -->
    <div class="appetizers-drinks-container">
      <% if (page === "appetizers") { %>
        <h1 class="title">APPETIZERS</h1>

        <% const items = menu[page] || []; %>
        <%
         const appetizerCalories = {
          "Chicken Egg Roll": "200 cal",
          "Veggie Spring Roll": "240 cal",
          "Cream Cheese Rangoon": "190 cal"
          };
        %>

        <% if (items.length > 0) { %>
          <div class="meal-grid">
            <% items.forEach(item => { %>
              <div class="meal-option">
                <img src="/images/<%= item.name.toLowerCase().replace(/ /g, '-')%>.jpg"
                     alt="<%= item.name %>"
                     class="meal-image"
                     onerror="this.onerror=null; this.src='/images/placeholder.jpg';"/>
                <div class="meal-name"><strong><%= item.name %></strong></div>
                <div class="meal-calories"><%= appetizerCalories[item.name] || '' %></div>
                <div class="meal-price">$<%= item.price.toFixed(2) %></div>
              </div>
            <% }) %>
          </div>
        <% } %>

        <!-- Drinks Section -->
          <div class="drinks-container">
            <h2 class="title">DRINKS</h2>

            <%
              // Get fountain drink price from database
              const allItems = menu['appetizers'] || [];
              const fountainDrink = allItems.find(i => i.name === 'Fountain Drink');

              // Use Fountain Drink as base price for all sizes
              const basePrice = fountainDrink ? fountainDrink.price : 2.20;
              const smallPrice = basePrice;
              const mediumPrice = basePrice + 0.20;
              const largePrice = basePrice + 0.40;
            %>

            <!-- Fountain Drink Images Row -->
            <div class="fountain-drinks-row flex mb-4" style="gap: clamp(12px, 1.2vw, 30px);">
              <!-- Placeholder images -->
              <img src="/images/pepsi.png" alt="Pepsi" class="drink-img" style="width: clamp(90px, 8vw, 180px); height: clamp(90px, 8vw, 180px); border-radius: 50%; object-fit: cover;">
              <img src="/images/tropicana.jpg" alt="Tropicana" class="drink-img" style="width: clamp(90px, 8vw, 180px); height: clamp(90px, 8vw, 180px); border-radius: 50%; object-fit: cover;">
              <img src="/images/mtn-dew.png" alt="Mountain Dew" class="drink-img" style="width: clamp(90px, 8vw, 180px); height: clamp(90px, 8vw, 180px); border-radius: 50%; object-fit: cover;">
              <img src="/images/starry.png" alt="Starry" class="drink-img" style="width: clamp(90px, 8vw, 180px); height: clamp(90px, 8vw, 180px); border-radius: 50%; object-fit: cover;">
              <img src="/images/dr-pepper.png" alt="Dr Pepper" class="drink-img" style="width: clamp(90px, 8vw, 180px); height: clamp(90px, 8vw, 180px); border-radius: 50%; object-fit: cover;">
            </div>

            <!-- Drink Labels & Prices -->
            <div class="fountain-drinks-info flex text-gray-700" style="gap: clamp(20px, 2vw, 50px); font-size: clamp(26px, min(2.2vw, 3vh), 90px);">
              <div class="drink-name">Fountain Drinks</div>
              <div class="drink-prices flex" style="gap: clamp(15px, 1.5vw, 35px);">
                <div style="display: flex; flex-direction: column; align-items: center;">
                  <span style="font-size: clamp(20px, min(1.6vw, 2.3vh), 38px); color: #888;">Small</span>
                  <span>$<%= smallPrice.toFixed(2) %></span>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center;">
                  <span style="font-size: clamp(20px, min(1.6vw, 2.3vh), 38px); color: #888;">Medium</span>
                  <span>$<%= mediumPrice.toFixed(2) %></span>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center;">
                  <span style="font-size: clamp(20px, min(1.6vw, 2.3vh), 38px); color: #888;">Large</span>
                  <span>$<%= largePrice.toFixed(2) %></span>
                </div>
              </div>
            </div>
          </div>


      <% } %>
    </div>

<!-- A La Carte content -->
<div class="a-la-carte-container">
  <% if (page === "a_la_carte") { %>
    <h1 class="title">ENTREE CHOICES</h1>
    <%
      const calories = {
        "Orange Chicken": "510 cal",
        "Honey Sesame Chicken Breast": "340 cal",
        "Beijing Beef": "480 cal",
        "Grilled Teriyaki Chicken": "275 cal",
        "Black Pepper Sirloin Steak": "180 cal",
        "Broccoli Beef": "150 cal",
        "Kung Pao Chicken": "320 cal",
        "Mushroom Chicken": "220 cal",
        "String Bean Chicken Breast": "210 cal",
        "Honey Walnut Shrimp": "430 cal",
        "Black Pepper Chicken": "280 cal",
        "The Original Orange Chicken": "510 cal",
      };
      const entrees = (menu['a_la_carte'] || []).filter(item => item.name !== 'Super Greens' && item.name !== 'Super Greens (Entree)');
    %>
    <div class ="entree-grid">
      <% entrees.forEach(item => { %>
        <div class="meal-option">
          <img src="/images/<%= item.name.toLowerCase().replace(/ /g, '-')%>.jpg"
               alt="<%= item.name %>"
               class="meal-image"
               onerror="this.onerror=null; this.src='/images/placeholder.jpg';"/>
          <div class="meal-text">
            <div class="meal-name"><strong><%= item.name %></strong></div>
            <div class="meal-calories"><%= calories[item.name] || '' %></div>
            <div class="meal-price">$<%= item.price.toFixed(2) %></div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>

    <!-- Sides and A La Carte Boxes content -->
    <div class="sides-container">
      <% if (page === "sides") { %>
        <h1 class="title">SIDE CHOICES</h1>
        <p style="font-size: clamp(20px, min(1.6vw, 2.3vh), 38px); padding-bottom: clamp(10px, 1vw, 25px);" class="italic">Choose One or get Half & Half</p>
        
       <% const items = menu[page] || []; %>
       <%
        const calories = {
          "Fried Rice": "520 cal",
          "Chow Mein": "510 cal",
          "Super Greens": "180 cal",
          "White Steamed Rice": "380 cal"
        };
       %>

        <% if (items.length > 0) { %>
          <div class="meal-grid">
            <% items.forEach(item => { %>
              <div class="meal-option">
                <img src="/images/<%= item.name.toLowerCase().replace(/ /g, '-')%>.jpg"
                     alt="<%= item.name %>"
                     class="meal-image"
                     onerror="this.onerror=null; this.src='/images/placeholder.jpg';"/>
                <div class="meal-name"><strong><%= item.name %></strong></div>
                <div class="meal-calories"><%= calories[item.name] || '' %></div>
                <div class="meal-price">$<%= item.price.toFixed(2) %></div>
              </div>
            <% }) %>
          </div>
        <% } %>
          <h2 class="title">A LA CARTE BOXES</h2>
          <!-- Sides Page: A La Carte -->
          <%
            // Get a la carte prices from database
            const aLaCarteItems = menu['a_la_carte'] || [];

            // Find regular entree prices (cheapest entree will be the regular price)
            const regularEntrees = aLaCarteItems.filter(item =>
              item.name !== 'Honey Walnut Shrimp' &&
              item.name !== 'Super Greens' &&
              item.name !== 'Super Greens (Entree)'
            );
            const premiumEntrees = aLaCarteItems.filter(item =>
              item.name === 'Honey Walnut Shrimp'
            );

            const regularEntreePrice = regularEntrees.length > 0 ? Math.min(...regularEntrees.map(e => e.price)) : 0;
            const premiumEntreePrice = premiumEntrees.length > 0 ? premiumEntrees[0].price : 0;

            // Find side prices
            const sideItems = menu['sides'] || [];
            const sidePrice = sideItems.length > 0 ? Math.min(...sideItems.map(s => s.price)) : 0;
          %>
            <div class="a-la-carte-sides-container flex" style="margin-top: clamp(12px, 1.2vw, 30px);">

              <!-- Left Column: Entrees -->
              <div class="entrees-column flex-1">
                <h2 class="font-bold" style="font-size: clamp(26px, min(2.2vw, 3vh), 52px); margin-bottom: clamp(8px, 0.8vw, 20px);">Entrees</h2>
                <div class="flex justify-start" style="font-size: clamp(20px, min(1.6vw, 2.3vh), 38px); gap: clamp(20px, 2vw, 50px);">
                  <div>
                    <div class="font-semibold">Small</div>
                    <div>starts at $<%= regularEntreePrice.toFixed(2) %></div>
                  </div>
                  <div>
                    <div class="font-semibold">Medium</div>
                    <div>starts at $<%= regularEntreePrice.toFixed(2) %></div>
                  </div>
                  <div>
                    <div class="font-semibold">Large</div>
                    <div>starts at $<%= regularEntreePrice.toFixed(2) %></div>
                  </div>
                </div>
              </div>

              <!-- Right Column: Sides -->
              <div class="sides-column flex-1">
                <h2 class="font-bold" style="font-size: clamp(26px, min(2.2vw, 3vh), 52px); margin-bottom: clamp(8px, 0.8vw, 20px);">Sides</h2>
                <div class="flex justify-start" style="font-size: clamp(20px, min(1.6vw, 2.3vh), 38px); gap: clamp(20px, 2vw, 50px);">
                  <div>
                    <div class="font-semibold">Medium</div>
                    <div>starts at $<%= sidePrice.toFixed(2) %></div>
                  </div>
                  <div>
                    <div class="font-semibold">Large</div>
                    <div>starts at $<%= sidePrice.toFixed(2) %></div>
                  </div>
                </div>
              </div>

            </div>

      <% } %>
     </div>

  </div>
</body>

<script>
/* -------------------------------------
   GO FULLSCREEN BUTTON (ENTIRE PAGE)
-------------------------------------- */
const fullscreenBtn = document.getElementById("fullscreen-btn");
const topContainer = document.getElementById("top-container");

fullscreenBtn.addEventListener("click", () => {
  const docEl = document.documentElement;

  if (!document.fullscreenElement) {
    // ENTER FULLSCREEN
    if (docEl.requestFullscreen) docEl.requestFullscreen();
  } else {
    // EXIT FULLSCREEN
    if (document.exitFullscreen) document.exitFullscreen();
  }
});

/* Hide or show top bar when fullscreen */
document.addEventListener("fullscreenchange", () => {
  const isFullscreen = document.fullscreenElement !== null;
  topContainer.style.display = isFullscreen ? "none" : "block";
});


/* -------------------------------------
   FEATURED PAGE â†’ CLICK IMAGE TO FULLSCREEN
-------------------------------------- */
function requestFullscreenForImage(img) {
  if (img.requestFullscreen) img.requestFullscreen();
  else if (img.webkitRequestFullscreen) img.webkitRequestFullscreen();
  else if (img.msRequestFullscreen) img.msRequestFullscreen();
}

document.querySelectorAll(".featured-img").forEach(img => {
  // Click handler
  img.addEventListener("click", () => {
    requestFullscreenForImage(img);
  });

  // Keyboard handler for accessibility
  img.addEventListener("keydown", (e) => {
    if (e.key === "Enter" || e.key === " ") {
      e.preventDefault();
      requestFullscreenForImage(img);
    }
  });
});

/* -------------------------------------
   AUTOSCROLL FEATURE
-------------------------------------- */
const autoscrollBtn = document.getElementById("autoscroll-btn");
const autoscrollContainer = document.getElementById("autoscroll-container");
const autoscrollImage = document.getElementById("autoscroll-image");
const exitAutoscrollBtn = document.getElementById("exit-autoscroll");

let autoscrollInterval = null;
let currentImageIndex = 0;
let isAutoscrolling = false;
let mouseTimeout = null;
let currentAutoscrollImages = []; // Store currently selected images for autoscroll

// Function to get selected images from checkboxes
function getSelectedImages() {
  const checkboxes = document.querySelectorAll('.img-checkbox:checked');
  const selectedImages = Array.from(checkboxes).map(cb => cb.getAttribute('data-img-src'));
  return selectedImages;
}

async function startAutoscroll() {
  // Get currently selected images
  const selectedImages = getSelectedImages();

  // Validate that at least two images are selected
  if (selectedImages.length < 2) {
    alert('Please select at least two images for autoscroll');
    return;
  }

  // Store selected images for use during autoscroll
  currentAutoscrollImages = selectedImages;

  isAutoscrolling = true;
  autoscrollBtn.classList.add("active");
  autoscrollBtn.textContent = "Stop Autoscroll";
  if (autoscrollBtn) autoscrollBtn.setAttribute("aria-pressed", "true");

  // Enter fullscreen mode FIRST
  const docEl = document.documentElement;
  try {
    if (!document.fullscreenElement) {
      if (docEl.requestFullscreen) {
        await docEl.requestFullscreen();
      } else if (docEl.webkitRequestFullscreen) {
        await docEl.webkitRequestFullscreen();
      } else if (docEl.msRequestFullscreen) {
        await docEl.msRequestFullscreen();
      }
    }
  } catch (err) {
    console.error("Error entering fullscreen:", err);
  }

  // Then show the autoscroll container
  autoscrollContainer.classList.add("active");
  autoscrollContainer.classList.add("hide-cursor");
  exitAutoscrollBtn.classList.remove("visible");

  // Show first image
  currentImageIndex = 0;
  showCurrentImage();

  // Change image every 5 seconds
  autoscrollInterval = setInterval(() => {
    currentImageIndex = (currentImageIndex + 1) % currentAutoscrollImages.length;
    showCurrentImage();
  }, 5000);
}

function stopAutoscroll() {
  isAutoscrolling = false;
  autoscrollBtn.classList.remove("active");
  autoscrollBtn.textContent = "Start Autoscroll";
  if (autoscrollBtn) autoscrollBtn.setAttribute("aria-pressed", "false");
  autoscrollContainer.classList.remove("active");
  autoscrollContainer.classList.remove("hide-cursor");
  exitAutoscrollBtn.classList.remove("visible");

  if (autoscrollInterval) {
    clearInterval(autoscrollInterval);
    autoscrollInterval = null;
  }

  if (mouseTimeout) {
    clearTimeout(mouseTimeout);
    mouseTimeout = null;
  }

  autoscrollImage.classList.remove("visible");

  // Exit fullscreen mode
  if (document.fullscreenElement) {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    }
  }
}

function showCurrentImage() {
  // Fade out
  autoscrollImage.classList.remove("visible");

  // Wait for fade out, then change image and fade in
  setTimeout(() => {
    autoscrollImage.src = currentAutoscrollImages[currentImageIndex];
    autoscrollImage.classList.add("visible");
  }, 500);
}

// Event listeners
if (autoscrollBtn) {
  autoscrollBtn.addEventListener("click", () => {
    if (isAutoscrolling) {
      stopAutoscroll();
    } else {
      startAutoscroll();
    }
  });
}

if (exitAutoscrollBtn) {
  exitAutoscrollBtn.addEventListener("click", stopAutoscroll);
}

// Stop autoscroll when pressing Escape
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape" && isAutoscrolling) {
    stopAutoscroll();
  }
});

/* -------------------------------------
   BACK TO NAVIGATION BUTTON
-------------------------------------- */
const backBtn = document.getElementById("back-btn");
if (backBtn) {
  backBtn.addEventListener("click", () => {
    window.location.href = "/";
  });
}

// Handle mouse movement to show/hide exit button
function showExitButton() {
  exitAutoscrollBtn.classList.add("visible");
  autoscrollContainer.classList.remove("hide-cursor");

  // Clear existing timeout
  if (mouseTimeout) {
    clearTimeout(mouseTimeout);
  }

  // Hide button after 3 seconds of no movement
  mouseTimeout = setTimeout(() => {
    exitAutoscrollBtn.classList.remove("visible");
    autoscrollContainer.classList.add("hide-cursor");
  }, 3000);
}

// Add mousemove listener to autoscroll container
if (autoscrollContainer) {
  autoscrollContainer.addEventListener("mousemove", () => {
    if (isAutoscrolling) {
      showExitButton();
    }
  });
}
</script>
</html>
